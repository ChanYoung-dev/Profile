<html><head><script src="../embed-sub.js" defer></script><link rel="stylesheet" href="../notion-mainstyle.css" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Linux Firewall, Booting</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: none;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
}

.simple-table-header {
	background: rgb(247, 246, 243);
	color: black;
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="c2c94dae-85c8-4435-9a08-52ba438107d8" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="Web%20encryption%205e0ae8625fa4497f9dd074c97b27ba34/kuber.png"/></div><h1 class="page-title">Linux Firewall, Booting</h1></header><div class="page-body"><h1 id="e5099292-ecc9-4e9b-a773-f6fd2ab7c699" class="">목차</h1><p id="0c8811ef-810e-4e96-b6c7-d984f6ace7a1" class="">부팅 프로세스
방화벽
SELinux</p><p id="f550fd74-5f8c-4cf4-ac5b-cfee1784f1a1" class="">
</p><p id="34ad34bd-3b69-49f8-b284-6ef336c2bee2" class="">
</p><p id="b89e47f3-1875-4165-aed3-3462a9318a66" class="">데몬 프로세스의 단위 : unit
프로세스의 단위 : thread</p><p id="88eb153f-5a04-4dff-8983-695465706fb9" class="">
</p><p id="fad41b06-1019-46b9-b8e0-c3d0eaf88559" class="">리눅스 부팅 과정</p><ul id="ad1912a5-432c-4db4-bb57-e522b86e3493" class="bulleted-list"><li style="list-style-type:disc">어떤 순서로 부팅되고 CLI로 부팅할 것인 GUI로 부팅할 것인지 등에 대한 제어</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="b3f5c1b4-0bf2-457d-a7b9-18937613de73"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%"><strong>부팅 과정 정리</strong>
하드웨어 -&gt; 부트로더(커널 준비) -&gt; 커널 -&gt; 파일시스템 마운트 -&gt;
드라이버 초기화 -&gt; 사용자 단계에서 systemd 실행</div></figure><blockquote id="17acf1ee-d8c8-4f2a-9519-930bb0d29fcd" class="">커널 : 운영체제의 핵심이 되는 컴퓨터 프로그램의 하나, 시스템의 모든 것을 완전히 통제, 컴퓨터의 핵심</blockquote><ol type="1" id="4f8109ae-7a0d-4187-b8d9-2078fe6b6848" class="numbered-list" start="1"><li>커널 단계<ol type="a" id="56306115-799e-48d4-b983-10eafe082650" class="numbered-list" start="1"><li>부팅이 가능한 파티션이 있는지, 커널이 있는지 확인</li></ol><ol type="a" id="b1b8e378-5c23-4be5-95b7-c919befcc293" class="numbered-list" start="2"><li>POST(Power On Self Test)를 실행</li></ol><ol type="a" id="c0d350c0-9ce1-4105-8fdd-ced9782d30dc" class="numbered-list" start="3"><li>시스템 펌웨어를 업로드하여 초기화 작업을 실행<ul id="08c7f85a-67ac-4d96-afb4-a3d4ec2c4231" class="bulleted-list"><li style="list-style-type:disc">BIOS, UEFI</li></ul></li></ol><ol type="a" id="86a30588-8f34-4064-934a-5b09f98e1280" class="numbered-list" start="4"><li>부트로더 실행</li></ol><ol type="a" id="69e6f9d2-d8f9-4ac7-af32-43ec94c8fe7b" class="numbered-list" start="5"><li><code>/boot/grub2/grub.cfg</code> 파일에서 해당 구성을 로드하고 부팅할
커널을 선택</li></ol><ol type="a" id="e731f548-c574-465c-a014-653b9653febd" class="numbered-list" start="6"><li>커널을 선택하거나 제한 시간이 만료되면 부트 로더가 디스크에서
커널 및 <code>initramfs</code>를 로드하여 메모리에 적재<ul id="2efdfe54-2ff2-46a3-8050-2a6ba08c9ce3" class="bulleted-list"><li style="list-style-type:disc"><code>initramfs</code> : 부팅, 초기화 스크립트 등에 필요한 모든 하드웨어에 대한
커널 모듈이 포함된 아카이브</li></ul></li></ol></li></ol><ol type="1" id="09e5eff1-c0b0-49bd-a798-d619bb174e6c" class="numbered-list" start="2"><li>커널 이후 단계<ol type="a" id="378168c8-4efc-46f9-ba2f-f70fc079d795" class="numbered-list" start="1"><li><code>initramfs</code>가 주로 사용하는 파일시스템을 마운트</li></ol><ol type="a" id="f53c10cf-f70b-4aeb-a51a-6421ddb5564c" class="numbered-list" start="2"><li> <code>initramfs</code>에서 드라이브를 적재</li></ol><ol type="a" id="db4daf9c-0629-47c0-9fa0-f1595f9b6bed" class="numbered-list" start="3"><li><code>systemd</code> 프로세스가 <code>initrd.target</code> 대상에 대한 모든 유닛을 실행,
루트 파일 시스템을 디스크의 <code>/sysroot</code> 디렉토리에 마운트(<code>/etc/fstab</code>)<ul id="dae2a668-6595-4542-8e46-94990d95d50f" class="bulleted-list"><li style="list-style-type:disc"><code>/sysroot</code> : root 시스템 점검을 하기 위한 읽기 전용 디렉토리</li></ul></li></ol><ol type="a" id="289ab723-b672-4e58-b281-8c15998fc15e" class="numbered-list" start="4"><li>커널을 initramfs의 루트 파일 시스템을 /sysroot의 루트파일 시스템으로 전환함</li></ol></li></ol><ul id="a39c3256-3e38-46a9-a0fd-d439f02507d7" class="bulleted-list"><li style="list-style-type:disc">initramfs /sysroot -&gt; 시스템의 /sysroot -&gt; /</li></ul><p id="2e621b8a-48a6-4c8c-949e-3d7a1aa1bea4" class=""><code>systemd</code> : 시스템에 구성된 기본 대상을 찾은 다음 해당 대상에 대한 구성을 준수할 유닛을 시작</p><p id="c3da50ec-d0ac-40b4-b906-005d62011cee" class=""><a href="http://graphical.target"><code>graphical.target</code></a> : 의존성 확인</p><p id="4215bca8-0b63-49ad-8285-cfe46e237a11" class="">
</p><p id="5c3b94bc-0eec-4709-8fa5-ee0f888b46f3" class=""><code>systemctl list-dependencies graphical.target | grep target</code></p><ul id="ed092f5b-4bbe-4d04-b2fd-85b9bea60f4d" class="bulleted-list"><li style="list-style-type:disc"><code>systemctl list-dependencies</code> : 모든 유닛 의존성 확인<pre id="dac02398-92de-43ef-8d1c-53e32097d1ef" class="code code-wrap"><code>[root@servera ~]# systemctl list-dependencies graphical.target | grep target
graphical.target
● └─multi-user.target
●   ├─basic.target
●   │ ├─selinux-policy-migrate-local-changes@targeted.service
●   │ ├─paths.target
●   │ ├─slices.target
●   │ ├─sockets.target
●   │ ├─sysinit.target
●   │ │ ├─cryptsetup.target
●   │ │ ├─local-fs.target
●   │ │ └─swap.target
●   │ └─timers.target
●   ├─getty.target
●   └─remote-fs.target</code></pre></li></ul><p id="3b8d160a-0558-44c3-8c97-d5d7af6679dc" class="">타겟 설정 파일 : <code>/etc/systemd/system/default.target</code>
</p><pre id="b5922642-f88c-4b7a-a3d0-fceefa171efc" class="code code-wrap"><code>[root@servera ~]# cat /etc/systemd/system/default.target
...
AllowIsolate=yes</code></pre><p id="6d3be1ea-c410-456b-b2fb-fddcd61ed167" class=""><code>yes</code>가 되어있으면 <code>systemctl isolate</code> 명령으로 타겟을 바꿀 수 있음</p><ul id="bbd4665a-562d-4bdc-9dd4-993d4ffb700f" class="bulleted-list"><li style="list-style-type:disc">graphical.target 으로 즉시 전환 : <code>systemctl isolate graphical.target</code><ul id="500f06f0-eb2d-4997-9115-434c8418ec34" class="bulleted-list"><li style="list-style-type:circle">일시적 적용, 재부팅 시 기본 값으로 적용</li></ul></li></ul><ul id="9a8fb4ad-5fc3-400a-bc71-d972b28b282c" class="bulleted-list"><li style="list-style-type:disc">multi-user.target 으로 즉시 전환 : <code>systemctl isolate multi-user.target</code><ul id="1435de9e-db7b-4d13-9ddd-9505756094ce" class="bulleted-list"><li style="list-style-type:circle">일시적 적용, 재부팅 시 기본 값으로 적용</li></ul></li></ul><p id="30cf8ea8-4cd8-44d3-97b1-9ec8631b466c" class="">
</p><p id="461761b5-b2db-482c-9e5c-13eb7bb1c386" class="">타겟 확인 방법 : <code>ls -l /usr/lib/systemd/system/ | grep runlevel*</code></p><p id="cbc2ef63-ab78-4ec1-8ece-099694198495" class="">
</p><p id="d54ea5ab-fcde-48c0-9999-1dd874e62acc" class="">부팅시 기본으로 설정되어 있는 타겟 확인 : <code>systemctl get-default</code></p><pre id="617518e6-2d10-4ed0-abb5-171d3c83c503" class="code code-wrap"><code>[root@servera ~]# systemctl get-default
multi-user.target</code></pre><p id="56f47288-c08e-4400-8520-c19d3a1c2394" class="">
</p><p id="ab775eda-0c97-4639-ad18-371af4ddb99f" class="">부팅 타겟 영구 변경 : <code>systemctl set-default graphical.target</code></p><pre id="894a2053-f52a-492e-8c46-38f25d3864f5" class="code code-wrap"><code>[root@servera ~]# systemctl get-default
graphical.target</code></pre><p id="ed5f94f2-8ae6-4ab2-931d-97ee229d24e9" class="">
</p><h3 id="eb98b253-d266-4048-86f9-367d14917ba6" class=""><code>/etc/fstab</code> 설정 파일이 잘못 설정되어 부팅에 문제가 생겼을 때</h3><ol type="1" id="0a60d4a9-167c-42a8-befd-b3152e17977d" class="numbered-list" start="1"><li>부트 로더 메뉴 진입</li></ol><ol type="1" id="a4d59ce6-58d4-4008-b6f5-0282130832c1" class="numbered-list" start="2"><li>Enter 키를 제외한 임의의 키를 눌러 카운트다운 중단</li></ol><ol type="1" id="7dc7af89-086b-4f85-bc9c-666f5956c8f3" class="numbered-list" start="3"><li><code>e</code>를 눌러 <mark class="highlight-brown_background">edit mode 활성화</mark></li></ol><ol type="1" id="b0b9bd3c-01b5-4c9c-a04b-9567a0f1560d" class="numbered-list" start="4"><li>linux로 시작하는 행의 마지막으로 커서 이동 후 행 끝에
<code>systemd.unit=emergency.target</code> 입력</li></ol><ol type="1" id="628a0031-1df6-4dcd-9123-dac14227d116" class="numbered-list" start="5"><li><code>ctrl</code> + <code>x</code> 눌러 <code>emergency</code> 모드로 진입</li></ol><ol type="1" id="c444cb39-2380-45d0-9b47-802d28981652" class="numbered-list" start="6"><li>루트 파일 시스템을 읽기/쓰기로 다시 마운트 : <code>mount -o remount,rw /</code></li></ol><ol type="1" id="79e83280-3130-47fa-8b71-25d4d905248b" class="numbered-list" start="7"><li><code>/etc/fstab</code> 파일에서 잘못된 줄을 삭제하거나 수정 혹은 주석 처리</li></ol><ol type="1" id="b5388912-e1b1-436a-9d37-c22b5fc5e0da" class="numbered-list" start="8"><li><code>mount -a</code></li></ol><ol type="1" id="ed009f79-9a00-4d6b-aa47-47cef9c67757" class="numbered-list" start="9"><li><code>ctrl</code> + <code>D</code> 후 재부팅</li></ol><p id="4beef7b7-68e6-44f1-bf72-00e56b163bbb" class="">
</p><p id="5eac9386-7abd-43bd-aa23-352e9f0a3862" class="">
</p><h3 id="bc8aa708-7bc7-4aaa-8282-8b551cc77a73" class="">root 비밀번호를 분실했을 경우</h3><ol type="1" id="122054c9-3c99-4b96-bf23-acf1b0c61e25" class="numbered-list" start="1"><li>부트 로더 메뉴 진입</li></ol><ol type="1" id="0a3ea415-55bb-4111-98f6-d9f0722d90e3" class="numbered-list" start="2"><li>Enter 키를 제외한 임의의 키를 눌러 카운트다운 중단</li></ol><ol type="1" id="f9082bb7-b1fa-498b-8c9c-a76f8daec8ad" class="numbered-list" start="3"><li><code>e</code>를 눌러 <code>edit mode</code> 활성화</li></ol><ol type="1" id="5564aab5-71d7-4019-b09e-fc90cc7a50a3" class="numbered-list" start="4"><li>linux로 시작하는 행의 마지막으로 커서 이동 후 행 끝에 <code>rd.break</code> 입력</li></ol><ol type="1" id="670d0bff-92f5-4da7-ad59-f65609746f9f" class="numbered-list" start="5"><li><code>ctrl</code> + <code>x</code> 키를 눌러 root 비밀번호를 바꾸기 위한 모드로 진입</li></ol><ol type="1" id="820a688e-9456-4467-ba8c-c23290e5e0a0" class="numbered-list" start="6"><li><code>ls</code> 입력</li></ol><ol type="1" id="ce65ba30-6487-4c5c-84e7-49df948306c7" class="numbered-list" start="7"><li><code>/sysroot</code> 파일 확인</li></ol><ol type="1" id="88ff27bb-26fd-41bc-9fb1-5c0f60a3d5a5" class="numbered-list" start="8"><li>현재 <code>/sysroot</code> 파일 시스템이 <code>/</code> 디렉토리에 마운트되지 않았음을 의미</li></ol><ol type="1" id="2c6942fe-a9b9-4b35-8cb0-5d939cbb159d" class="numbered-list" start="9"><li><code>/sysroot</code>를 읽기/쓰기로 다시 마운트 : <code>mount -o remount</code></li></ol><ol type="1" id="69d9f323-a127-429b-861d-95f436952684" class="numbered-list" start="10"><li><code>rw /sysroot</code> : <code>/sysroot</code> 디렉토리를 최상위 디렉토리로 적용</li></ol><ol type="1" id="00efc905-4621-42f8-9bf5-3241855aac66" class="numbered-list" start="11"><li>안전한 작업을 위해 격리<ul id="bbcead6c-9416-4037-9b64-b66acbcecc61" class="bulleted-list"><li style="list-style-type:disc"><code>passwd</code> 명령어 입력시 <code>/sysroot</code>에서 입력이 되게 해야하기 때문</li></ul><ul id="b375df94-2491-4cb6-909d-fe7459950125" class="bulleted-list"><li style="list-style-type:disc">/sysroot 가 / 디렉토리에 적용될 것이기 때문</li></ul></li></ol><ol type="1" id="1cbb12bb-c1c6-4b9e-a6cb-c1db79d0db3f" class="numbered-list" start="12"><li><code>passwd</code> 명령어로 root 비밀번호 변경</li></ol><ol type="1" id="bc1bebe8-c728-4e0c-b385-5acc6f746149" class="numbered-list" start="13"><li><code>touch /.autorelabel</code></li></ol><ol type="1" id="ec1fcc0d-bf7c-4809-8173-3ea8315170b0" class="numbered-list" start="14"><li>현재 최상위 디렉토리는 <code>/sysroot</code></li></ol><ol type="1" id="6295f6c7-c931-4389-9b3f-c7249f9437ac" class="numbered-list" start="15"><li>변경된 사항을 파일로 만들어 적용</li></ol><ol type="1" id="f8be391f-927a-4bb2-89a0-dac4bfbdc833" class="numbered-list" start="16"><li><code>ctrl</code> + <code>d</code> 두 번 눌러 재부팅</li></ol><p id="c88bc60d-355e-44b1-a8fd-2de4f326bd7e" class="">
</p><p id="f923ef9c-2005-4406-a552-a8aebde9328a" class="">
</p><p id="413d2985-dd50-4a6b-b5a1-776d55e833cf" class="">
</p><h1 id="a2b221d4-bc92-4c4c-848c-b3b24e060807" class="">서버 방화벽 관리 : 방화벽 아키텍쳐</h1><p id="90e4a563-c370-41ee-a238-7c715ec1e27e" class="">1차 보안 수단</p><ul id="8d610aca-d76d-414f-8db4-1c87ac13cce4" class="bulleted-list"><li style="list-style-type:disc">패킷제어를 함으로써 네트워크로 침투하는 경로의 보안 강화</li></ul><ul id="f884245a-7a99-4e2a-a92f-c3bb90337319" class="bulleted-list"><li style="list-style-type:disc">예전에는 <strong>iptables</strong> 서비스를 사용, 7버전 이후 <strong>firewalld</strong> 사용</li></ul><p id="bed068e4-4702-4631-ade9-3b19da16d89b" class="">
</p><p id="3efc78a3-7554-4f7f-8dc2-c7d55f130497" class="">설정 3가지 방법</p><ul id="7fd8ab59-40a8-4046-9b01-52e74b12ce7d" class="bulleted-list"><li style="list-style-type:disc">그래픽 도구(firewalld config, cockpit)</li></ul><ul id="be097f3c-eaa9-4e9d-9222-eebd27a26eec" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-brown_background">명령어 도구(</mark><code><mark class="highlight-brown_background">firewall-cmd</mark></code><mark class="highlight-brown_background">)</mark></li></ul><p id="48367145-3958-4809-94b0-ffe78f61325b" class="">
</p><p id="b3c2f7c9-ee1f-4780-909d-df91ef887d1b" class="">
</p><p id="abf39594-87e3-48b8-828d-b61a911e90e1" class=""><code>firewall-cmd</code> - 어렵지만 recommend</p><ul id="02d7e8b6-cce5-4d60-9c32-d31918fbe317" class="bulleted-list"><li style="list-style-type:disc">현재 구동되고 있는 firewalld에 즉시 적용, firewall-cmd --reload를 실행하면 재부팅 시에 예전 정책으로 초기화됨(영구 설정 필요)</li></ul><ul id="9cf35407-320a-4e9f-acd4-fef48cab10d0" class="bulleted-list"><li style="list-style-type:disc">기본 정책 : 거부 → 설정을 통해 허용해줌</li></ul><p id="5c9ec1b9-eea5-4d0a-990c-59cf3eabb11b" class="">
</p><p id="babfd4ce-b41b-4eb0-b106-9f2a8e51d6c7" class="">주요 옵션</p><p id="5ebe9fc3-09b1-4e36-b6f3-c7876d5ea9ca" class="">
</p><p id="9bd78d8d-7136-4287-8fbc-8ebbca24b08a" class=""><code>firewall-cmd --list-all</code></p><p id="05c8f142-2e85-4920-8035-2f049a81311e" class="">현재 적용된 룰 확인</p><p id="d15ad736-820e-48e8-92a8-6f6cefb2362d" class="">
</p><p id="8dcd8ae4-96e4-4fb9-9452-b55f5f9e020d" class=""><code>firewall-cmd --add-service=ftp</code></p><p id="111c7302-06c5-40e2-a9ec-edec81382de5" class="">서비스 허용 룰 추가</p><p id="a883a3aa-fc28-4952-93c6-d18d188e9874" class="">
</p><p id="d07fd5bb-c784-4caa-a021-f7b434ae5dff" class="">ftp 서비스 허용</p><p id="16be4779-f1b3-451d-8c6c-c6f8be34b6cc" class=""><code>firewall-cmd --remove-service=ftp</code></p><p id="b6160810-a0b7-40ae-8e92-5d1dfef21a31" class="">
</p><p id="26275a3d-a630-483a-b2be-7d4caed742c9" class="">ftp 서비스 허용 룰 제거</p><p id="9a788f74-d9b3-4195-a4a9-e894372a9ea5" class=""><code>firewall-cmd --add-port=21/tcp</code></p><p id="3224c08a-8ebf-44cb-acc1-41312ce468d4" class="">
</p><p id="6c29eb33-bbb7-4d23-aca2-fc34e0add636" class="">포트 허용 룰 추가</p><ul id="4aace944-3123-47c6-bf39-5220cadac254" class="bulleted-list"><li style="list-style-type:disc">21번(ftp) 포트 허용 : <code>firewall-cmd --remove-port=21/tcp</code></li></ul><ul id="0f0cf40a-9127-4151-a278-fece63650602" class="bulleted-list"><li style="list-style-type:disc">8000~9000번 포트 허용 :<code>firewall-cmd --add-port=8000-9000/tcp</code></li></ul><p id="d6a7a270-75bf-46ab-a7cd-4986f3731074" class="">
</p><p id="311c57d3-16e2-4032-b6b4-c704befa4c8a" class="">
</p><p id="62a851be-3782-4fc4-af07-b9ecfb3dbd68" class="">8000~9000번 포트 허용 룰 제거  : <code>firewall-cmd --remove-port=8000-9000/tcp</code></p><p id="f957141c-4047-49ba-90fc-9be7f34abf5b" class=""><code>firewall-cmd --add-source=192.168.56.0/24</code> : 192.168.56.0 대역 허용</p><p id="16fe62a4-8bee-4fe7-b6e7-8cce94637769" class=""><code>firewall-cmd --remove-source 192.168.56.0/24</code> : 192.168.56.0 대역 허용 룰 제거</p><p id="ef1b935c-89de-43a8-9d8c-ef303bd164e2" class=""><code>firewall-cmd --add-source=192.168.56.11/32</code> : 192.168.56.11 특정 아이피 허용</p><p id="23bfb090-e327-4e13-b2f8-b3bf30806320" class="">
</p><h3 id="0d7b7875-79fb-40af-b0d3-19d66168bbb2" class=""><code>-permanent</code> : 영구 설정 옵션</h3><p id="c9ba6396-815b-4abb-8ccd-c40b29298270" class=""><code>firewall-cmd --add-service=ftp --permanent</code></p><p id="f4b0a1c0-6d87-41a6-be06-ae8a9590352b" class=""><code>firewall-cmd --remove-service=ftp --permanent</code></p><p id="4c3ddda8-4946-4b72-8aa8-5f40c08cab57" class="">영구 설정 확인 : <code>firewall-cmd --list-all --permanent</code></p><p id="229270c1-f00d-4cad-b286-27da4b790d45" class="">
</p><h3 id="6f09d657-0c1d-4a0d-a98b-8e4e6e44e700" class=""><code>zone</code></h3><p id="813be042-ee0e-47f5-a7f6-3f8641ae3bbf" class=""><code>firewalld</code> 에는 <code>존(zone)</code>이라는 영역 개념이 존재</p><p id="f97d31f6-d2e2-448c-8a26-00a41beb1557" class=""><code>zone</code>을 설정해두면 인터페이스 별로 영역을 설정함으로써 관리를 쉽게
빠르게 할 수 있음</p><p id="74f5473c-0371-40dd-9197-f923872577a0" class="">
</p><p id="b60e6226-f233-4af2-8834-231832210c3e" class=""><code>zone</code> 목록 출력 : <code>firewall-cmd --get-zones</code></p><p id="06fdf1d0-078a-4b39-b49c-bec44a8f7099" class=""><code>zone</code> 목록 출력(상세) : <code>firewall-cmd --list-all-zones</code></p><p id="0e7509e5-e765-43de-a168-a32b038d6db3" class="">default로 설정된 존 확인 : <code>firewall-cmd --get-default-zone</code></p><p id="c02b2b46-3c92-4cc9-911e-25b25dc6e0e3" class="">현재 활성화된 존 확인 : <code>firewall-cmd --get-active-zone</code></p><p id="7873f169-51c6-4f85-a8ae-ccb40a09bcdb" class="">새로운 <code>zone</code> 추가 : <code>firewall-cmd --new-zone=webserver --permanent</code></p><ul id="e6b76890-14e2-4128-afb0-4b3875887ce1" class="bulleted-list"><li style="list-style-type:disc"><code>zone</code> 추가시에는 반드시 영구적으로 추가해줘야 함</li></ul><p id="13221440-0207-4a88-acab-f18a537208c9" class="">
</p><p id="22b3e862-737e-49bb-a1e7-a124ecce22c3" class=""><code>zone</code>에 서비스 허용 룰 영구 추가</p><p id="a1409c77-02ca-49e4-8e45-245d6e15c1e8" class=""><code>firewall-cmd --zone=webserver --add-service=http --permanent</code></p><p id="3aecba2e-971e-411e-8bff-4560249a7bae" class="">
</p><p id="2a8fc7ad-7308-470a-a3c7-ee7f2f4b1d8e" class=""><code>zone</code>에 서비스 허용 룰 영구 제거</p><p id="69da7ffd-fa3a-4e6b-beb5-520ab29b64ac" class=""><code>firewall-cmd --zone=webserver --remove-service=http --permanent</code></p><p id="82297cc5-171f-4810-a84c-5fc8bbfa16d0" class="">
</p><p id="2137e861-8f31-4e93-a7a6-e9d7adb08db9" class="">기존 존 변경</p><p id="46f533c7-bd43-468f-b23e-197b475d309a" class=""><code>firewall-cmd --set-default-zone=webserver</code></p><p id="58b46e22-28d0-4249-9030-81f5190b1e2e" class=""><code>firewall-cmd --set-default-zone=public</code></p><p id="e1e5bb2d-59fa-40fb-a42e-2df8f94f4f83" class="">
</p><p id="614a5950-2364-4848-a914-0703ee319c24" class="">존 삭제</p><p id="fc6a7523-ecac-4abc-a0bd-45b5efdb310d" class=""><code>firewall-cmd --delete-zone=webserver --permanent</code></p><p id="a50031a1-c0c4-41b7-81d8-6f5fcc361f99" class="">
</p><h3 id="a633a4f4-b986-4547-89e3-8edbef21b3da" class=""><code>rich-rule</code> : 특정 룰</h3><p id="fbd978da-1bad-4d73-bf03-15935b2c91df" class=""><code>service</code> 허용시 모든 아이피에 대해 허용하게 되지만 <code>rich-rule</code>을
사용하면 특정 아이피를 차단할 수 있음</p><p id="62b3c774-c924-4862-b85c-645d7fd1a0ff" class="">
</p><p id="0a44ff08-77b3-43e5-ba9c-f8e0952044ac" class="">192.168.56.100 아이피 차단</p><p id="5f8be9c8-4962-41e6-bcb3-dd3dcb7b2818" class=""><code>firewall-cmd --add-rich-rule=&#x27;rule family=&quot;ipv4&quot; source address=192.168.56.100 reject&#x27;</code></p><p id="8a189401-4cdf-4052-a047-45938c103d6f" class=""><code>firewall-cmd --add-rich-rule=&#x27;rule family=&quot;ipv4&quot; source address=192.168.56.100 drop&#x27;</code></p><p id="3ce8be5b-448f-4c66-a5aa-053fae57b98f" class="">
</p><p id="cd58bb54-5ccb-48ad-a1ac-dda23af5e936" class="">192.168.56.100 아이피 차단 룰 제거</p><p id="2225b418-0cab-4e89-9b76-0c9614aeb196" class=""><code>firewall-cmd --remove-rich-rule=&#x27;rule family=&quot;ipv4&quot; source address=192.168.56.100 reject&#x27;</code></p><p id="8594b0e9-3388-45e5-a7d3-61645ce61330" class=""><code>firewall-cmd --remove-rich-rule=&#x27;rule family=&quot;ipv4&quot; source address=192.168.56.100 drop&#x27;</code></p><p id="d3903cb9-ee76-4d1e-8234-c0dba5a825c3" class="">
</p><p id="55b3d6de-35b9-496d-af92-4bff7d11b9e9" class="">
</p><h1 id="7704094d-f83f-48f5-aa25-8b21a489d0f0" class="">SELinux : Security Enhanced Linux</h1><p id="5717b61b-f842-4c25-97f7-8cd6f8250277" class="">Linux에서는 SELinux라는 중요한 보안 기능을 제공</p><p id="9241f016-c9f0-4e2c-a69a-f71bfe144963" class="">안전하게 사용하기 위함</p><p id="c4221d7c-d67a-40cd-a702-0ec67209af85" class="">Linux 접근 통제 방식(2가지)</p><ul id="e88745dc-23b3-478c-9b56-d0dc576f074f" class="bulleted-list"><li style="list-style-type:disc">DAC 모델 : Discretionary Access Control, 임의적 접근 통제<ul id="8ac5eede-c561-473f-be2b-ffa5de4d3a00" class="bulleted-list"><li style="list-style-type:circle">접근하려고 하는 사용자가 누구인지 확인하여 접근 제어</li></ul><ul id="28e7daa0-e01d-4c06-8bbe-d90e3c57d086" class="bulleted-list"><li style="list-style-type:circle">일반적인 시스템에서 많이 사용</li></ul></li></ul><ul id="8af1e88f-f4d6-40a5-a791-912f2c8951c8" class="bulleted-list"><li style="list-style-type:disc">MAC 모델<ul id="40eea2b3-78b4-42d6-bb2d-a57ac1319577" class="bulleted-list"><li style="list-style-type:circle">Mandatory Access Control, 강제적 접근 통제</li></ul><ul id="e2ee5e16-eb00-47c5-aa7b-ac7318648caf" class="bulleted-list"><li style="list-style-type:circle">root 사용자에게 막강한 권력이 있어서 외부 공격자들에 의해
지속적으로 권한 탈취 문제가 야기되었고, 관리자의 실수로 인해
다양한 장애 등이 발생할 수 있는 위험에 노출되어 있음</li></ul><ul id="dc3141c5-dece-4f93-8133-1e7356533df3" class="bulleted-list"><li style="list-style-type:circle">일반사용자들에게 제한적인 권한을 부여하는 것 이외에도
쉘로만 접근 혹은 웹으로만 접근할 수 있게 하는 등 특정
프로세스로만 접근할 수 있도록 지정하는 방법</li></ul></li></ul><p id="95172509-47a1-45ca-8732-9b5411070b0d" class="">
</p><p id="c2bc6d3a-0df2-41ae-8226-a09931466265" class="">
</p></div></article></body></html>