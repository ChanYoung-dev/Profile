<html><head><script src="../embed-sub.js" defer></script><link rel="stylesheet" href="../notion-mainstyle.css" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Linux NFS</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: none;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="c8bd38b7-81ec-4ce8-a38a-a8172b621870" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="Web%20encryp%205e0ae/kuber.png"/></div><h1 class="page-title">Linux NFS</h1></header><div class="page-body"><h1 id="331ba788-32b0-4b75-b53e-d04c8fc2af4c" class="">nfs 서버구축</h1><p id="bc91c43d-0e61-4060-840d-cd8d8b189a96" class="">
</p><h2 id="8c663e82-5265-45f7-ba70-0a3feefe2ed6" class="">서버 구축</h2><p id="e42f180c-dde7-4583-94e5-1501724ae396" class="">NFS 체크</p><p id="39173bcd-42fd-421a-a0b8-6b2d7ed55505" class=""><code>rpm -qa nfs-utils</code></p><p id="76e0eb5c-a776-43b3-9c76-32e8ef48438a" class="">
</p><p id="6797b8b3-532d-4c11-9fc2-f49c0fabb8ea" class=""><code>/etc/exports</code> 공유디렉터리 설정파일 </p><p id="448c9111-372c-4b20-b54e-c9464baa6421" class=""><code>vi /etc/exports</code></p><p id="e0366c37-07a0-4c1b-a73b-ced6837c4d82" class="">
</p><p id="18503f94-604a-410b-b58d-6a0140c85e3f" class="">읽기, 쓰기, 실시간 동기화(같이 쓰는걸위해)</p><pre id="ee3c10bc-cf45-4153-91f4-1479f466ca23" class="code code-wrap"><code>/share 10.0.2.*(rw,sync)</code></pre><p id="c2cfd716-ed20-4601-b775-a50be6a7d7af" class="">
</p><p id="93cf3638-e3a6-4468-8335-ffc2027a00bb" class="">
</p><p id="4d004722-c432-489e-9c91-a6fbf593395c" class="">실제 공유 디렉토리 생성</p><pre id="72fc4670-0053-428e-9e50-2de4ccf8ae10" class="code code-wrap"><code>[root@localhost ~]# mkdir /share
[root@localhost ~]# chmod 777 /share</code></pre><p id="ea310c2e-57ea-4d0a-8062-4f383ccf50eb" class="">
</p><p id="52a18932-61ff-4648-8023-bfe3c0dfef48" class="">공유할 파일 생성</p><p id="88f887b9-15e8-4588-af02-8f71d5b0106b" class=""><code>touch /share/test</code></p><p id="de455a4d-3235-4aa2-9e84-e5cc8add1c07" class="">
</p><p id="b00b9c9f-45e2-48a9-a413-d4d8909c9e26" class="">설정적용</p><pre id="acad9d54-8d01-4534-8b44-201c3e8cadc2" class="code code-wrap"><code>[root@localhost ~]# systemctl restart nfs-server
[root@localhost ~]# systemctl enable nfs-server</code></pre><p id="8f7af090-6d70-4a22-9a3f-10917710efcd" class="">
</p><p id="d28ba11e-a286-488e-ad1f-7ba2ac896113" class="">공유 확인</p><pre id="09f57e0a-cf34-4ba3-b96f-01b7d95eca9a" class="code code-wrap"><code>[root@localhost ~]# exportfs -v
/share        	10.0.2.*(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,root_squash,no_all_squash)</code></pre><p id="8716533b-2d06-4ce8-bb82-9e5dcfa5d251" class="">
</p><p id="61a54331-da4f-4eab-bfcb-c25ae7e6d6ed" class="">방화벽 설정</p><pre id="3c25cc68-6583-40b2-9fca-55f177dab358" class="code code-wrap"><code>[root@localhost ~]# firewall-cmd --permanent --add-service mountd
success
[root@localhost ~]# firewall-cmd --permanent --add-service rpc-bind # 해당서비스 포트를 알려준다
success
[root@localhost ~]# firewall-cmd --permanent --add-service nfs
success
[root@localhost ~]# firewall-cmd --reload</code></pre><p id="a1ffaaee-ae1b-4f9e-8874-396eb1845e97" class="">
</p><h2 id="fa96e836-a351-4d38-97b4-d6feb1597f24" class="">클라이언트</h2><p id="ad41cf21-9e4c-4b6e-a051-741a12535c5a" class="">nfs 설치확인</p><p id="5210add7-cfe8-4be4-93fc-735eadd7b686" class=""><code>rpm -qa nfs-utils</code></p><p id="5b210043-901e-477c-996b-6047d6b0574c" class="">
</p><p id="b5682832-1ffb-41dc-81cb-5c0e62fbb5d9" class="">해당 IP 마운트 정보 보기</p><pre id="f4bd5bde-48a4-4120-a80e-1fe32e9a256a" class="code code-wrap"><code>[root@localhost ~]# showmount -e 10.0.2.4
Export list for 10.0.2.4:
/share 10.0.2.*</code></pre><p id="643ee8f7-3f28-4140-adcf-ecca5fdb65f2" class="">
</p><p id="ecc47ab1-c704-4ff0-99a6-c86fc0e1a407" class="">마운트할 디렉토리 생성</p><p id="9f35b3d9-4fa5-4971-bb77-dec35962dae3" class=""><code>mkdir /nfs_share</code></p><p id="f85494e1-ce3d-4729-806a-d3e92ae0f51b" class="">
</p><p id="6cad7971-9334-4a09-a348-7763c2e315f6" class="">NFS와 디렉토리 연결</p><p id="ecfc31cc-bf69-4e6d-a113-87254de6a0c8" class=""><code>mount -t nfs 10.0.2.4:/share /nfs_share</code></p><p id="c672e584-99bf-423c-b058-4eabeaaff2fa" class="">
</p><p id="a8d4df29-7f06-4a9f-8e7c-a660bd96735d" class="">공유파일 확인 - 클라이언트</p><pre id="1bf04849-5c80-420d-b87a-b6fa948f3d7c" class="code code-wrap"><code>[root@localhost ~]# cd /nfs_share/
[root@localhost nfs_share]# ls
test
[root@localhost nfs_share]# touch client
[root@localhost nfs_share]# ls
client  test</code></pre><p id="b1ad0f76-5218-460b-9950-e645d44d294c" class="">
</p><p id="9be2b09a-9180-4e05-9690-9099c7bd9f1a" class="">공유파일확인 - 서버</p><pre id="5951b056-b3e4-4f56-ba67-e37c2ae54331" class="code code-wrap"><code>[root@localhost ~]# ls
anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates
Desktop          Downloads  Music                 Public    Videos
[root@localhost ~]# ls /share
client  test</code></pre><p id="da500db2-43ac-4bb4-b130-93a508db99e3" class="">
</p><p id="1f331eab-f2b4-4dcc-a274-cadeb8f4e9b7" class="">
</p><p id="919c1976-322d-47da-96c8-02090cc5958d" class=""><code>mount</code> 명령어는 재부팅하면 동작하지않는 문제가 있다.</p><p id="2bcfca22-ff4a-49f7-a9a6-839c0cfc09d4" class="">이를 해결하기 위해 <code>/etc/fstab</code> 를 사용하면 되지만 오타가 있을 경우 부팅이 되지않는 문제가 있다.</p><p id="da5ea4b6-d769-4823-8e1f-920be9da32a5" class="">이를 전부 해결하기 위해</p><p id="a581f17b-6f64-44cb-83dc-df2d263c8307" class="">AutoFS</p><ul id="f5f5e040-8ab9-4daf-8761-227b848f6cb7" class="bulleted-list"><li style="list-style-type:disc">자동 마운트 데몬의 작동을 제어하는 프로그램</li></ul><ul id="5ddfc127-f06c-4922-a324-16230aa5d7df" class="bulleted-list"><li style="list-style-type:disc">자동 마운트 데몬은 자동으로 파일시스템을 마운트하여 파일 시스템이 사용되지 않고 일정 시간이 흐르면 자동으로 언마운트</li></ul><ul id="952f8717-c881-447d-b51a-a2eafbbe6b40" class="bulleted-list"><li style="list-style-type:disc">네트워크 파일 시스템(NFS), CDROM 등을 자동 마운트하는데 사용함</li></ul><p id="2b14388e-e239-407c-a14b-39454840b6c3" class="">
</p><p id="84574e22-1e3e-4ba9-87c3-d12b338237f0" class="">AutoFS와 맵(MAP)</p><p id="0d43c505-26b6-4e76-9168-30e48125824b" class="">MAP : AutoFS 모듈이 동작하는데 필요한 정보가 저장된 설정 파일</p><p id="b773a2ee-18a3-4a0e-b3e0-d7051a1097de" class="">
</p><h3 id="7e2c49fb-9bef-4a53-b112-70ad5123bb3a" class="">MAP의 종류</h3><ol type="1" id="e3ffeff6-145a-46e8-977c-0fe3d3201fe3" class="numbered-list" start="1"><li>master map</li></ol><ul id="7e77cb64-21b3-4409-98d8-aeff75461fd4" class="bulleted-list"><li style="list-style-type:disc">autofs 에서 가장 기준이 되는 맵</li></ul><ul id="ef62fd5a-151e-47e9-b776-9bfc66f8fd88" class="bulleted-list"><li style="list-style-type:disc"><code>/etc/auto.master.d/</code>에 이름.autofs 파일에 설정 저장</li></ul><ul id="ba283a23-9f1f-4e2c-a1aa-5a4d6f84460c" class="bulleted-list"><li style="list-style-type:disc">direct map이나 indiret map의 이름과 포인터를 정의하는 역할 담당</li></ul><ol type="1" id="ce726b75-7ea3-45e2-907e-cc97c6d34e29" class="numbered-list" start="2"><li>direct map( 직접 맵 마운트)</li></ol><ul id="85b9493d-8de0-43c1-9bb1-44bfd0ff4b44" class="bulleted-list"><li style="list-style-type:disc"><code>/etc/auto.</code>이름 으로 관습적으로 파일을 만들어서 설정저장</li></ul><ul id="369e0955-a9c6-499c-8872-8de7739aafaf" class="bulleted-list"><li style="list-style-type:disc">맵 내부의 마운트 포인터로 절대 경로명을 사용함</li></ul><ol type="1" id="67256c44-2aa3-4dcf-b1f0-b56d1da5a30d" class="numbered-list" start="3"><li>indirect map( 간접 맵 마운트)</li></ol><ul id="a4494b0a-6f79-45fd-b36f-b4e11bed14bd" class="bulleted-list"><li style="list-style-type:disc"><code>/etc/auto.</code>이름으로 관습적으로 파일을 만들어서 설정 저장</li></ul><ul id="0703f74c-ab37-4ebf-bf3b-afb959dce764" class="bulleted-list"><li style="list-style-type:disc">맵 내부의 마운트 포인터로 상대 경로명을 사용함</li></ul><p id="b04c0978-cb2b-4df1-b596-c462d3b2376b" class="">
</p><p id="08e6d86b-861f-4a94-8fa9-527cfa427fad" class="">직접 맵 마운트 실습</p><h2 id="04e0622e-4fdd-4618-9058-667cb1c2be71" class="">클라이언트</h2><p id="db52dd2a-b815-4de8-951f-a8873bbebc8a" class="">
</p><p id="7ac23f7e-a9a2-46c8-83b6-f681f166cb20" class="">autofs 설치</p><p id="dd3d3f7e-cadd-431b-8c5e-b488d25e1ddc" class=""><code>yum install -y autofs</code></p><p id="191577f4-a41a-41f6-a1a6-9ee5c97c44b9" class="">
</p><p id="f04f38f2-3732-4b71-af12-346c8cce0e70" class="">
</p><p id="5af9cf81-1a0a-4750-ae55-2ae97b4ceef6" class="">mount했던것을 언마운트</p><p id="4c570eb1-5c53-4659-ae5e-f9a6ed572ca7" class=""><code>umount /nfs_share</code></p><p id="f1fa1ab6-6bce-4002-8b83-64bad8a42660" class="">
</p><p id="06660234-bd61-42c1-ae58-a598d9f0e6e5" class="">master map 만들기</p><p id="9037397f-4b5b-483e-9bf4-945674887888" class=""><code>vi /etc/auto.master.d/direct.autofs</code></p><pre id="81c61bbc-916f-4cdb-9ae0-226d7dbb099e" class="code code-wrap"><code>/-      /etc/auto.direct # 직접 맵 마운트를 사용 설정파일은 /etc/auto.direct</code></pre><p id="790ccb52-d573-445d-b046-8dff3b710954" class=""><code>/-</code> : 직접맵마운트를 쓰겠다</p><p id="b3760882-2466-458e-802d-efa40bc16907" class="">
</p><p id="c1e632c9-9171-4e84-ab86-7c71f644589d" class="">
</p><p id="fc1b38cb-0dfb-419b-953e-bcb786002e6d" class="">direct map 세팅</p><p id="10175a74-db16-4d2b-80da-e26fef9c3492" class=""><code>vi /etc/auto.direct</code></p><pre id="dfe19844-0c57-48b5-a92c-60f54349854b" class="code code-wrap"><code>/nfs_share      -rw,sync        10.0.2.4:/share
~                                                                               
~</code></pre><p id="4414e577-86bd-4e52-b106-80c0632bbdf9" class="">
</p><p id="37e7494e-3360-43c2-8e35-0a7f3f993efa" class="">설정 적용</p><p id="73409504-3da6-4da8-8e51-7cdd06c92961" class=""><code>systemctl restart autofs</code></p><p id="ec5f29cd-cd11-49ec-a1f9-7715c3d73090" class="">
</p><p id="e7526333-0976-42c4-ad4c-99ec78dbf36d" class="">결과 확인</p><pre id="2375eb41-f33b-4065-bcab-af6bcf407955" class="code code-wrap"><code>[root@localhost ~]# cd /nfs_share/
[root@localhost nfs_share]# ls
client  test</code></pre><p id="e0df13ad-2d79-48c6-b699-532a8a3ab4a1" class="">
</p><p id="6af3c306-4122-425a-9407-47ae91987607" class="">자이제 문제가 생기거나 접속이 끊키면 알아서 언마운트가 된다</p><p id="dc22ecb4-4883-4087-94f4-1b548c3370f7" class="">
</p><p id="4c7ec6ea-9ea8-44b0-a5e0-e18146fdc6bc" class="">
</p><p id="4020c65d-b150-4764-9a9d-808fc2d39eef" class="">간접 맵 마운트</p><p id="38c7cb64-06f6-4ca9-977a-436ff897a246" class="">
</p><p id="76fa2761-7efb-4d05-a869-fbd80caaf90c" class="">클라이언트 초기화</p><pre id="0144dbbe-7338-4fb6-8f1c-db205543f4c0" class="code code-wrap"><code>[root@localhost nfs_share]# systemctl stop autofs
[root@localhost nfs_share]# rm -rf /etc/auto.master.d/direct.autofs 
[root@localhost nfs_share]# umount /nfs_share 
umount.nfs4: /nfs_share: device is busy
[root@localhost nfs_share]# umount /nfs_share /
umount.nfs4: /nfs_share: device is busy
umount: /: target is busy.
        (In some cases useful info about processes that use
         the device is found by lsof(8) or fuser(1))
[root@localhost nfs_share]# umount /nfs_share/
umount.nfs4: /nfs_share: device is busy
[root@localhost nfs_share]# cd ..
[root@localhost /]# umount /nfs_share/</code></pre><p id="483b5d6e-7b4d-4c5c-838d-0e2f89f36ee9" class="">
</p><p id="c098ebff-1855-447c-bfe5-a12e9152f931" class="">
</p><p id="60522a18-2354-4b13-bef8-d0c83a14266d" class="">마스터맵 작성</p><p id="0041363d-b706-4816-84ad-bced77e910ae" class=""><code>vi /etc/auto.master.d/indirect.autofs</code></p><pre id="30150a60-46cb-474c-afe6-039a613bff2e" class="code code-wrap"><code>/indirect       /etc/auto.indirect #/indirect 공유파일이 생성될 곳(상대경로)</code></pre><p id="ae4eb0ed-d6c3-4965-a3d1-72af4a504d02" class="">
</p><p id="fe0c04c5-b33a-4a79-94de-18b9ffc740c4" class="">간접 맵 작성</p><pre id="3ebe8715-431e-4b21-bf8c-20560b427c6b" class="code code-wrap"><code>vi /etc/auto.indirect
share   -rw,sync        10.0.2.4:/share # /indirect/share로 공유 파일이 생성된다</code></pre><p id="c6929103-7424-4c7e-bd11-e2a683e75911" class="">
</p><p id="23b7d047-50d8-4191-9d12-feb6648ce016" class="">실제 디렉토리 생성</p><pre id="3e90bfc9-260e-4cd8-ac1e-011d4f249bb5" class="code code-wrap"><code>[root@localhost /]# mkdir /indirect
[root@localhost /]# mkdir /indirect/share</code></pre><p id="bfa88e33-4eb8-4753-97c1-6577a4d17fc5" class="">
</p><p id="255e235c-b09f-4d51-b05e-904cb3a585a8" class="">설정 재적용</p><p id="41a51576-47eb-4a12-9fd4-fb90be132c3e" class=""><code>systemctl restart autofs</code></p><p id="3f69c44e-05f1-4bc1-9ed3-64b8c9104f5f" class="">
</p><p id="17ca5e2d-047a-4579-b36c-329243a938a8" class="">결과확인</p><pre id="d1a4fa70-687b-4114-af48-f40ee9331cd2" class="code code-wrap"><code>[root@localhost /]# ls /indirect/share
client  test</code></pre><p id="5e7fba1c-5b32-4557-b03d-568cd1e39171" class="">
</p></div></article></body></html>